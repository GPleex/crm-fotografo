{% extends 'layout.html' %}
{% block conteudo %}
<h2 class="mb-4">Cadastro de Cliente</h2>
<form method="POST" class="row g-3">
  <div class="col-md-6">
    <label class="form-label">Nome completo:</label>
    <input type="text" name="nome" class="form-control" required>
  </div>
  <div class="col-md-6">
    <label class="form-label">CPF:</label>
    <input type="text" name="cpf" id="cpf" class="form-control" maxlength="14" required>
  </div>
  <div class="col-md-6">
    <label class="form-label">Email:</label>
    <input type="email" name="email" class="form-control" required>
  </div>
  <div class="col-md-6">
    <label class="form-label">WhatsApp:</label>
    <input type="text" name="whatsapp" id="whatsapp" class="form-control" maxlength="13" placeholder="00 00000-0000" required>
  </div>

  <div class="col-12">
    <button type="submit" class="btn btn-primary">Salvar</button>
  </div>
</form>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const cpfInput = document.getElementById("cpf");
    if (cpfInput) {
      cpfInput.addEventListener("input", function (e) {
        let value = e.target.value.replace(/\D/g, "").slice(0, 11);
        value = value
          .replace(/(\d{3})(\d)/, "$1.$2")
          .replace(/(\d{3})(\d)/, "$1.$2")
          .replace(/(\d{3})(\d{1,2})$/, "$1-$2");
        e.target.value = value;
      });
    }
  });

  document.addEventListener("DOMContentLoaded", function () {
  const input = document.getElementById("whatsapp");
  if (input) {
    input.addEventListener("input", function () {
      let value = input.value.replace(/\D/g, "").slice(0, 11); // Remove tudo que não for número
      if (value.length >= 2) {
        value = value.replace(/^(\d{2})(\d)/, "$1 $2");
      }
      if (value.length >= 7) {
        value = value.replace(/(\d{5})(\d{1,4})$/, "$1-$2");
      }
      input.value = value;
    });
  }
});
</script>

{% endblock %}
